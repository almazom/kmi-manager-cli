# SSOT Task List â€” KMI Manager CLI
Generated: 2026-01-30

## ğŸ”´ High-Priority Tasks (Critical)
1) Add concurrency control for proxy state mutations and decouple disk writes from the async request path (e.g., async lock + background writer or transactional store) to prevent race conditions and latency spikes. [ğŸ§¹ Maintainability, ğŸ§Ÿ Zombie, ğŸ›ï¸ Architecture]
2) Replace the custom TOML parser with a standards-compliant library and unify auth parsing across `_auths` and `~/.kimi/config.toml`; update error messages and docs to list all supported formats. [ğŸ§¹ Maintainability, ğŸ§Ÿ Zombie, ğŸ§™ UX]
3) Enforce upstream base URL validation (https-only + optional allowlist) to prevent key exfiltration via hostile `base_url` entries. [ğŸ§Ÿ Zombie, ğŸ© Domain]
4) Add an explicit auto-rotation disable command that clears persisted state and logs the action; consider defaulting to opt-in for compliance-sensitive environments. [ğŸ© Domain, ğŸ§¹ Maintainability, ğŸ§™ UX]
5) Harden remote proxy usage: require TLS guidance/guardrails, improve proxy-auth error messaging with explicit header examples, and document safe deployment patterns. [ğŸ§Ÿ Zombie, ğŸ© Domain, ğŸ§™ UX]

## ğŸŸ¡ Medium-Priority Tasks (Important)
1) Add schema versioning (and light migration plan) for `state.json` and `trace.jsonl`, and document the schema under `docs/`. [ğŸ§¹ Maintainability, ğŸ›ï¸ Architecture]
2) Introduce per-key rate limiting or concurrency caps to better align with provider quotas under multi-client load. [ğŸ© Domain, ğŸ§Ÿ Zombie]
3) Make health failures observable: log `/usages` fetch errors and surface a clear warning in the dashboard. [ğŸ§Ÿ Zombie, ğŸ§¹ Maintainability]
4) Normalize UX semantics: align `--health` vs `kmi health`, add a persistent mode banner (dry-run vs live), and provide `--plain` / `NO_COLOR` support. [ğŸ§™ UX]
5) Standardize locale/timezone handling across UI, trace, logs, and state; make it configurable or consistently local. [ğŸ§™ UX]
6) Consolidate packaging/docs hygiene: remove path shims if possible, eliminate empty dirs, and choose a single canonical docs directory (`docs/` vs `Docs/`). [ğŸ§¹ Maintainability, ğŸ§™ UX]
7) Add scenario-based integration tests for key edge cases (all keys unhealthy, upstream rate limits, proxy retry/cooldown loops, corrupted JSONL). [ğŸ”® Meta Critic]
8) Add file-permission checks and optional audit metadata (operator/action) to improve compliance readiness. [ğŸ© Domain]
