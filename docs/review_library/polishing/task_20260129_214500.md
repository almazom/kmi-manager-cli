# SSOT Tasks - KMI Manager CLI
Generated: 2026-01-29 21:45:00 MSK

Sources:
- docs/review_library/maintainability_20260129_213727.md
- docs/review_library/zombie_20260129_213727.md
- docs/review_library/domain_20260129_213727.md
- docs/review_library/ux_20260129_213727.md
- docs/review_library/meta_20260129_213727.md

## High Priority (Critical)
1) Fix CLI health crash: import Account in cli.py and add safe handling when mapping current account. Sources: maintainability, zombie, ux, meta.
2) Fix render_health_dashboard crash: define/remove reset_line, build Text safely when lines are None, add regression test. Sources: maintainability, zombie, ux, meta.
3) Add file locking + atomic writes for state.json and trace.jsonl; avoid write-on-read in load_state. Sources: maintainability, zombie, domain, ux, meta.
4) Add proxy safety guard (local-only by default or token/allowlist when binding non-local). Sources: zombie, domain, meta.
5) Handle zero eligible keys and upstream httpx failures with actionable CLI/proxy errors (no stack trace). Sources: ux, zombie, meta.

## Medium Priority (Important)
6) Add rate limit/backoff controls and configurable caps in proxy; document ToS compliance in SDD and CLI help. Sources: domain, meta.
7) Improve trace TUI: tail-based reading, distribution summary, confidence warnings (<95%). Sources: maintainability, ux.
8) Align CLI semantics with SDD (kmi health should show all keys or document difference); add --auto-rotate alias. Sources: ux, domain.
9) Fix status labels (EXCAUSTED typo) and make WARN states visible in dashboards. Sources: maintainability, ux.
10) Add .gitignore for caches, and document paths (~/.kmi vs ~/.kimi). Sources: maintainability, meta.
11) Add tests for UI rendering, state/trace corruption recovery, and proxy error paths. Sources: maintainability, zombie, meta.

