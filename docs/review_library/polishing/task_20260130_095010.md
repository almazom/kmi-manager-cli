# SSOT Tasks - 2026-01-30 09:50:10

Context: KMI Manager CLI review synthesis from expert council reports.

## High Priority (Critical)
- [ ] Fix global rate limiter logic (broken control flow + unreachable code) and add tests for global/per-key limits. Refs: ğŸ§¹ Maintainability, ğŸ© Domain, ğŸ§Ÿ Zombie.
- [ ] Add streaming support (or explicit non-streaming guardrails) and implement hop-by-hop header filtering to prevent buffering/memory spikes and header-smuggling risks. Refs: ğŸ© Domain, ğŸ§Ÿ Zombie.
- [ ] Update auto-rotation to incorporate health/usage signals so low-quota or error-prone keys are deprioritized before hard failures. Refs: ğŸ© Domain.
- [ ] Align dry-run semantics for health/usage calls (either honor dry-run or make live calls explicit via flag/banners). Refs: ğŸ§Ÿ Zombie, ğŸ§™ UX.

## Medium Priority (Important)
- [ ] Add state schema migrations keyed by `schema_version` plus migration tests. Refs: ğŸ§¹ Maintainability, ğŸ›ï¸ Architecture.
- [ ] Consolidate auth file discovery and parsing into a single helper to reduce drift. Refs: ğŸ§¹ Maintainability.
- [ ] Improve retry/cooldown handling for 429/5xx and reduce sticky health warnings (decay error counters). Refs: ğŸ© Domain.
- [ ] Add Windows-safe locking strategy or enforce single-instance usage in docs/CLI. Refs: ğŸ§Ÿ Zombie, ğŸ”® Meta.
- [ ] Improve trace/log handling for queue overflow and sensitive data; confirm permission warnings are actionable. Refs: ğŸ§Ÿ Zombie.
- [ ] Add CI workflow for pytest and cover missing tests: rate limiting, proxy auth guardrails, streaming/SSE, retry/rotation, config validation. Refs: ğŸ§ª QA, ğŸ© Domain.
- [ ] Consolidate docs under `docs/`, update SDD flags/outputs, and add short CLI examples in help/README. Refs: ğŸ§¹ Maintainability, ğŸ§™ UX.
- [ ] Improve config validation UX and "no keys" messaging to prevent misleading setups. Refs: ğŸ§™ UX.
- [ ] Consider dependency pinning/lockfile to reduce upgrade drift and improve reproducibility. Refs: ğŸ§Ÿ Zombie, ğŸ”® Meta.
- [ ] Add an evidence log per review (commands run, files checked, commit SHA) to improve reproducibility. Refs: ğŸ”® Meta.
